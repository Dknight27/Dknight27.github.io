<!--
 * @Description: 
 * @Autor: ShenHao
 * @Date: 2020-06-20 15:30:33
 * @LastEditors: ShenHao
 * @LastEditTime: 2020-06-21 09:06:39
--> 
---
layout: post
title: blockchain
date: 2020-03-08
subtitle: 只有你的努力不会辜负你
author: SH
tags:
        -学习笔记
---
# 多群组部署

## AMOP（链上信使协议）是什么？
为联盟提供安全高效的信息通道。不依赖节点共识，类似于消息队列的一个东西。AMOP可用于加快交易的速度，无需等待交易确认，只需一个对账（？）操作。

Application.xml中对不同的topic配置了各自的公钥，也就是说在配置时就要获取各节点的公钥，或许是发送topic时使用公钥加密，也就完成了topic的权限控制？

## Table.sol中的数据存储在哪里了？

## 什么是观察节点&共识节点？

## 交易和合约都存储在区块上吗？有什么区别吗？

## 一个区块如何存储多个交易？交易是如何被打包的？（未解决）
区块打包交易一般是间隔一定的时间出块，或者块里面的交易达到一定的量也会出块。所以说存储交易多少是跟合约没有关系的。

## 配置console证书时 
    拷贝group2节点证书到控制台配置目录
    $ cp ~/fisco/nodes/127.0.0.1/sdk/* conf/
这不是拷贝所有群组节点的配置吗，为什么说是group2

## 控制台
1. 使用控制台连接节点
控制台连接的节点必须在控制台配置的组中
<font size=1>意思是用**控制台控制**节点之前必须要配置控制台</font>
2. getDeployLog只能查询**由当前控制台部署**的合约

## 智能合约
合约主要分为以下几个构成部分：
1. 状态变量：如_admin，这些变量会永久保存（即存在链上），变量具有16个的上限，超过会报堆栈过深的错误（结构体只算一个变量）。memory变量是放在内存中的
2. 构造函数
3. 事件：类似于日志函数吧，主要作用是记录
4. 修饰符：类似于python中的修饰符，可以给函数套上一层功能
5. 函数
6. 结构体

## 关于jsonrpc_listen_port和channel_listen_port
jsonrpc可能是对本机进行一些操作，权限很大，如果对所有IP都开放那么本机会有危险。
channel可能是用来接受其他节点的一些请求，所以可以设置为0.0.0.0接受所有的IP

## 合约事件推送
合约事件推送功能提供了合约事件的异步推送机制，客户端向节点发送注册请求，在请求中携带客户端关注的合约事件的参数，节点根据请求参数对请求区块范围的Event Log进行过滤，将结果分次推送给客户端。
1. 注册请求是什么？答：客户端向节点请求推送事件，如果监听到事件则向客户端进行推送。
2. 客户端是什么？是应用落地之后的用户吗？